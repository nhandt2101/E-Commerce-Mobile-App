{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { Center, Box, Heading, VStack, FormControl, Input, Button, HStack, Link, Text } from 'native-base';\nimport * as SQLite from 'expo-sqlite';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var db = SQLite.openDatabase('Mobile.db');\n  useEffect(function () {\n    db.transaction(function (tx) {\n      tx.executeSql(`CREATE TABLE IF NOT EXISTS users (\n          id INTEGER PRIMARY KEY NOT NULL,\n          name TEXT DEFAULT 'abc abc',\n          age INTEGER DEFAULT 18,\n          email TEXT NOT NULL,\n          password TEXT NOT NULL\n      );`, [], function (_, result) {}, function (_, error) {\n        console.error('Lỗi tạo cơ sở dữ liệu:', error);\n      });\n    });\n  }, []);\n  var handleLogin = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      db.transaction(function (tx) {\n        tx.executeSql('SELECT id FROM users WHERE email = ? AND password = ?', [email, password], function (_, result) {\n          if (result.rows.length > 0) {\n            console.log(result.rows.item(0));\n            var userID = result.rows.item(0);\n            navigation.navigate('Home', {\n              userID: userID\n            });\n          } else {\n            alert('Sai tên đăng nhập hoặc mật khẩu.');\n          }\n        }, function (_, error) {\n          console.error('Lỗi thêm người dùng:', error);\n          alert('error');\n        });\n      });\n    });\n    return function handleLogin() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(Center, {\n    flex: 1,\n    children: _jsxs(Box, {\n      safeArea: true,\n      p: 2,\n      w: \"100%\",\n      h: \"100%\",\n      bg: \"white\",\n      rounded: \"lg\",\n      justifyContent: \"center\",\n      children: [_jsx(Heading, {\n        size: \"lg\",\n        color: \"coolGray.800\",\n        _dark: {\n          color: 'warmGray.50'\n        },\n        fontWeight: \"semibold\",\n        textAlign: \"center\",\n        children: \"Welcome\"\n      }), _jsxs(VStack, {\n        space: 3,\n        mt: \"5\",\n        children: [_jsxs(FormControl, {\n          children: [_jsx(FormControl.Label, {\n            children: \"Email ID\"\n          }), _jsx(Input, {\n            value: email,\n            onChangeText: function onChangeText(text) {\n              return setEmail(text);\n            },\n            placeholder: \"Email\"\n          })]\n        }), _jsxs(FormControl, {\n          children: [_jsx(FormControl.Label, {\n            children: \"Password\"\n          }), _jsx(Input, {\n            value: password,\n            onChangeText: function onChangeText(text) {\n              return setPassword(text);\n            },\n            placeholder: \"Password\",\n            type: \"password\"\n          }), _jsx(Link, {\n            _text: {\n              fontSize: \"xs\",\n              fontWeight: \"500\",\n              color: \"indigo.500\"\n            },\n            alignSelf: \"flex-end\",\n            mt: \"1\",\n            children: \"Forget Password?\"\n          })]\n        }), _jsx(Button, {\n          mt: \"2\",\n          colorScheme: \"indigo\",\n          onPress: handleLogin,\n          children: \"Sign in\"\n        }), _jsxs(HStack, {\n          mt: \"6\",\n          justifyContent: \"center\",\n          children: [_jsxs(Text, {\n            fontSize: \"sm\",\n            color: \"coolGray.600\",\n            _dark: {\n              color: \"warmGray.200\"\n            },\n            children: [\"B\\u1EA1n ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n?\", \" \"]\n          }), _jsx(Link, {\n            _text: {\n              color: \"indigo.500\",\n              fontWeight: \"medium\",\n              fontSize: \"sm\"\n            },\n            onPress: function onPress() {\n              return navigation.navigate('Register');\n            },\n            children: \"Sign Up\"\n          })]\n        }), _jsx(HStack, {\n          mt: \"6\",\n          justifyContent: \"center\",\n          children: _jsx(Link, {\n            _text: {\n              color: \"indigo.500\",\n              fontWeight: \"medium\",\n              fontSize: \"sm\"\n            },\n            onPress: function onPress() {\n              return navigation.navigate('LoginSalesman');\n            },\n            children: \"\\u0110\\u0103ng nh\\u1EADp t\\xE0i kho\\u1EA3n b\\xE1n h\\xE0ng\"\n          })\n        })]\n      })]\n    })\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","Center","Box","Heading","VStack","FormControl","Input","Button","HStack","Link","Text","SQLite","jsx","_jsx","jsxs","_jsxs","LoginScreen","_ref","navigation","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","db","openDatabase","transaction","tx","executeSql","_","result","error","console","handleLogin","_ref2","_asyncToGenerator","rows","length","log","item","userID","navigate","alert","apply","arguments","flex","children","safeArea","p","w","h","bg","rounded","justifyContent","size","color","_dark","fontWeight","textAlign","space","mt","Label","value","onChangeText","text","placeholder","type","_text","fontSize","alignSelf","colorScheme","onPress"],"sources":["C:/Users/acer/Desktop/mobile/E-Commerce-Mobile-App/src/screen/Login/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Center, Box, Heading, VStack, FormControl, Input, Button, HStack, Link, Text } from 'native-base';\r\nimport * as SQLite from 'expo-sqlite';\r\n\r\nexport default function LoginScreen({ navigation }) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const db = SQLite.openDatabase('Mobile.db');\r\n\r\n  useEffect(() => {\r\n    db.transaction((tx) => {\r\n      tx.executeSql(\r\n        `CREATE TABLE IF NOT EXISTS users (\r\n          id INTEGER PRIMARY KEY NOT NULL,\r\n          name TEXT DEFAULT 'abc abc',\r\n          age INTEGER DEFAULT 18,\r\n          email TEXT NOT NULL,\r\n          password TEXT NOT NULL\r\n      );`,\r\n        [],\r\n        (_, result) => {\r\n          // Xử lý sau khi cơ sở dữ liệu được tạo hoặc đã tồn tại\r\n        },\r\n        (_, error) => {\r\n          console.error('Lỗi tạo cơ sở dữ liệu:', error);\r\n        }\r\n      );\r\n    });\r\n  }, []);\r\n\r\n  const handleLogin = async () => {\r\n    db.transaction((tx) => {\r\n      tx.executeSql(\r\n        'SELECT id FROM users WHERE email = ? AND password = ?',\r\n        [email, password],\r\n        (_, result) => {\r\n          if (result.rows.length > 0) {\r\n            // User with matching email and password found\r\n            console.log(result.rows.item(0)); // Access the first result\r\n            const userID = result.rows.item(0)\r\n            navigation.navigate('Home', { userID });\r\n          } else {\r\n            // No user found with matching email and password\r\n            alert('Sai tên đăng nhập hoặc mật khẩu.');\r\n          }\r\n        },\r\n        (_, error) => {\r\n          console.error('Lỗi thêm người dùng:', error);\r\n          alert('error');\r\n        }\r\n      );\r\n    });\r\n  };\r\n  \r\n\r\n  return (\r\n    <Center flex={1}>\r\n      <Box safeArea p={2} w=\"100%\" h=\"100%\" bg=\"white\" rounded=\"lg\" justifyContent=\"center\">\r\n        <Heading size=\"lg\" color=\"coolGray.800\" _dark={{ color: 'warmGray.50' }} fontWeight=\"semibold\" textAlign=\"center\">\r\n          Welcome\r\n        </Heading>\r\n\r\n        <VStack space={3} mt=\"5\">\r\n          <FormControl>\r\n            <FormControl.Label>Email ID</FormControl.Label>\r\n            <Input\r\n              value={email}\r\n              onChangeText={(text) => setEmail(text)}\r\n              placeholder=\"Email\"\r\n            />\r\n          </FormControl>\r\n          <FormControl>\r\n            <FormControl.Label>Password</FormControl.Label>\r\n            <Input\r\n              value={password}\r\n              onChangeText={(text) => setPassword(text)}\r\n              placeholder=\"Password\"\r\n              type=\"password\"\r\n            />\r\n            <Link _text={{ fontSize: \"xs\", fontWeight: \"500\", color: \"indigo.500\" }} alignSelf=\"flex-end\" mt=\"1\">\r\n              Forget Password?\r\n            </Link>\r\n          </FormControl>\r\n          <Button mt=\"2\" colorScheme=\"indigo\" onPress={handleLogin}>\r\n            Sign in\r\n          </Button>\r\n\r\n          {/* Sign up */}\r\n          <HStack mt=\"6\" justifyContent=\"center\">\r\n            <Text fontSize=\"sm\" color=\"coolGray.600\" _dark={{ color: \"warmGray.200\" }}>\r\n              Bạn chưa có tài khoản?{\" \"}\r\n            </Text>\r\n            <Link _text={{ color: \"indigo.500\", fontWeight: \"medium\", fontSize: \"sm\" }} onPress={() => navigation.navigate('Register')}>\r\n              Sign Up\r\n            </Link>\r\n          </HStack>\r\n          <HStack mt=\"6\" justifyContent=\"center\">\r\n            <Link _text={{ color: \"indigo.500\", fontWeight: \"medium\", fontSize: \"sm\" }} onPress={() => navigation.navigate('LoginSalesman')}>\r\n              Đăng nhập tài khoản bán hàng\r\n            </Link>\r\n          </HStack>\r\n        </VStack>\r\n      </Box>\r\n    </Center>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}